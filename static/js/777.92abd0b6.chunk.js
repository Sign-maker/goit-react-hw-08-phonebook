"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[777],{5777:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(2791),a=n(5861),c=n(9439),s=n(4687),i=n.n(s),o=n(4420),u=function(e){return e.contacts.items},l=function(e){return e.contacts.isLoading},m=n(1222),d=n(3553),f=function(e){return e.filter.filterQuery},x=(0,d.P1)([u,f],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),h=function(){var e=(0,o.I0)();return{fetchContacts:(0,r.useCallback)((function(){return e(m.yF())}),[e]),addContact:function(t){return e(m.uK(t)).unwrap()},deleteContact:function(t){return e(m.GK(t)).unwrap()},isLoading:(0,o.v9)(l),contacts:(0,o.v9)(u),filteredContacts:(0,o.v9)(x)}},p=n(8026),Z=function(){var e=(0,o.I0)();return{filterValue:(0,o.v9)(f),setFilter:function(t){return e(p.T(t))}}},j=n(5140),v=n(2690),C=n(177),b=n(7947),g=n(9529),_=n(292),k=n(713),w="ContactForm_form__dhl+T",y=n(3329),F=function(){var e=(0,r.useState)(!1),t=(0,c.Z)(e,2),n=t[0],s=t[1],o=j.Z.useForm(),u=(0,c.Z)(o,1)[0],l=h(),m=l.contacts,d=l.addContact,f=Z().setFilter,x=function(e){var t=e.toLowerCase();return m.some((function(e){return e.name.toLowerCase()===t}))},p=function(){var e=(0,a.Z)(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,r=t.number,a={name:n.trimEnd(),number:r.trimEnd()},!x(a.name)){e.next=4;break}return e.abrupt("return",v.ZP.error("".concat(a.name," is in contacts!")));case 4:return e.prev=4,s(!0),e.next=8,d(a);case 8:v.ZP.success("Contact ".concat(n," added")),u.resetFields(),f(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),v.ZP.error("Unable to add contact! ".concat(e.t0));case 16:return e.prev=16,s(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsxs)(j.Z,{form:u,name:"Contact",autoComplete:"off",onFinish:p,layout:"vertical",className:w,children:[(0,y.jsx)(j.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input contact name!"},{min:3,message:"Min lenght=3"}],children:(0,y.jsx)(C.Z,{prefix:(0,y.jsx)(g.Z,{}),placeholder:"user@mail.com"})}),(0,y.jsx)(j.Z.Item,{label:"Number",name:"number",rules:[{required:!0,message:"Please input phone number!"}],children:(0,y.jsx)(C.Z,{type:"tel",prefix:(0,y.jsx)(_.Z,{}),placeholder:"38999999999"})}),(0,y.jsx)(j.Z.Item,{children:(0,y.jsx)(b.ZP,{type:"primary",icon:(0,y.jsx)(k.Z,{}),loading:n,htmlType:"submit",block:!0,children:"AddContact"})})]})},P=n(3361),N=n(7646),L=n(7633),I=n(2622),T=function(e){var t=e.id,n=e.name,s=e.number,o=h().deleteContact,u=(0,r.useState)(!1),l=(0,c.Z)(u,2),m=l[0],d=l[1],f=function(){var e=(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,o(t);case 4:v.ZP.success("Contact ".concat(n," deleted")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v.ZP.error("Unable to delete! ".concat(e.t0));case 10:return e.prev=10,d(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();return(0,y.jsx)(P.Z.Item,{children:(0,y.jsx)(N.Z,{actions:[(0,y.jsx)(L.Z,{title:"Delete the contact",description:"Are you sure to delete this contact?",onConfirm:f,okText:"Yes",cancelText:"No",children:(0,y.jsx)(b.ZP,{type:"primary",htmlType:"submit",icon:(0,y.jsx)(I.Z,{}),loading:m})})],children:(0,y.jsx)(N.Z.Meta,{title:n,description:s})})})},E=n(43),S=n(4664),q=function(){var e=h(),t=e.fetchContacts,n=e.filteredContacts,a=e.isLoading;return(0,r.useEffect)((function(){t()}),[t]),(0,y.jsxs)(y.Fragment,{children:[a&&(0,y.jsx)(E.Z,{tip:"Loading",size:"large",children:(0,y.jsx)("div",{})}),n.length>0&&(0,y.jsx)(P.Z,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4,xl:4,xxl:3},dataSource:n,renderItem:function(e){var t=e.id,n=e.name,r=e.number;return(0,y.jsx)(T,{id:t,name:n,number:r},t)}}),!a&&!n.length&&(0,y.jsx)(S.Z,{})]})},A=n(1730),J="Filter_form__wVnxJ",K=function(){var e=Z().setFilter;return(0,y.jsx)(j.Z,{name:"Filter",autoComplete:"off",layout:"vertical",className:J,children:(0,y.jsx)(j.Z.Item,{label:"Search",name:"filter",children:(0,y.jsx)(C.Z,{prefix:(0,y.jsx)(A.Z,{}),onChange:function(t){var n=t.target.value.trimStart();e(n)}})})})},M=n(6921),U="Contacts_section__JEEdl",V="Contacts_title__LxdN4",z=M.Z.Title,D=function(){return(0,y.jsx)("section",{className:U,children:(0,y.jsxs)("div",{className:"container",children:[(0,y.jsx)(z,{className:V,children:"Phonebook"}),(0,y.jsx)(F,{}),(0,y.jsx)(z,{level:2,className:V,children:"Contacts"}),(0,y.jsx)(K,{}),(0,y.jsx)(q,{})]})})}}}]);
//# sourceMappingURL=777.92abd0b6.chunk.js.map